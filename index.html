<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Documentation page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
</head>
<body>
   
<nav id="navbar">
        <header>Webcrawler attempt</header>
        <ul> 
          <a class="nav-link" href="#Introduction" rel="internal"><li>Introduction</li></a>
          <a class="nav-link" href="#What_I_already_knew" rel="internal"><li>What I already knew</li></a>
          <a class="nav-link" href="#C_Sharp_And_Python" rel="internal"><li>C Sharp and Python</li></a>
          <a class="nav-link" href="#Hello_World" rel="internal"><li>Hello World</li></a>
          <a class="nav-link" href="#Modules_used" rel="internal"><li>Modules used</li></a>
          <a class="nav-link" href="#Get_started" rel="internal"><li>Get started</li></a>
          <a class="nav-link" href="#Starting_the_browser" rel="internal"><li>Starting the browser</li></a>
          <a class="nav-link" href="#The_meat_of_the_program" rel="internal"><li>The meat of the program</li></a>
        </ul>
</nav>
      <main id="main-doc">
        <section class="main-section" id="Introduction">
          <header>Introduction</header>
            <article>  
                <p style="font-weight: 800">*Disclaimer: This is my first attempt on making a webcrawler. It may have a bad design. It was made for educational purpuses only. It is website specific. I've read the Terms and Conditions
                    of the site in question. Website: https://darksouls2.wiki.fextralife.com/Dark+Souls+2+Wiki</p>
                <p style="font-weight: 600">*Small note: I did NOT create general functions/classes to get the work done. I've tested each page with a separate script do to inconsistencies in the html
                     and not having a schema to follow on making this program. For demonstrational purposes I'll use the script I wrote to fetch all the images from the given link.
                </p>
        
                <p>Everything I've done for this mini project is in python. I've used python because I was in the process of learning stuff about the language and I was curious what can be done with it in how little time.
                    Also, I integrated selenium webdriver as well to see my creation in action.
                </p>
        
                <li>What I've done so far: used chrome webdriver through selenium for browser automation, grabbed the html of the page, downloaded some images, stored the images in their folder, stored the page's html for easy access.</li>
                <li>What I did NOT do: structure the program in OOP, store the data in a database, create a GUI. I plan on doing these things in the future.</li>
            </article>
        </section>

        <div class="separator"></div>

        <section class="main-section" id="What_I_already_knew">
          <header>What I already knew</header>
            <article>
                    <p>I already had some programming background before going head first into this challenge. Things I kind of knew:</p>
                    <li>Some medium use of the C# programming language</li>
                    <li>Some data structures</li>
                    <li>Some algorithms</li>
                    <li>How to tackle some programming problems</li>
                </article>
        </section>

        <div class="separator"></div>

        <section class="main-section" id="C_Sharp_And_Python">
          <header>C Sharp and Python</header>
            <article>
                <p>For me, the difference between C# and Python was huge mainly because Python is kind of like pseudo-code and sometimes I had difficulties wrapping my head around it coming from a C like programming language.</p>
                <p>I already knew that Python was and is very popular so I decided to give it a try. The good thing for me was that Python, like C#, is a managed language and I didn't have to bother learning memory allocation or how to work with pointers.</p>
                <p>Besides that, I've always wanted to build my own webcrawler but I had no idea how or where to start. Seeing how easy Python is, I decided to try building a webcrawler.</p>
            </article>
          </section>

        <div class="separator"></div>

        <section class="main-section" id="Hello_World">
            <header>Hello World</header>
                <article> 
                    Of course, as in every programming language I started with the well known Hello World program. I did this in every script to ensure that everything works correctly:
                    <pre>
                        <code>def greetMe(yourName){
        print("Hello " + yourName)
    }
greetMe("World")</code>
                    </pre>
                </article>
          </section>

        <div class="separator"></div>

        <section class="main-section" id="Modules_used">
          <header>Modules used</header>
            <p>First, for browser automation I used <strong>selenium</strong>. Also, I had to download the chromedriver from google's page. Selenium needs the chromedriver in order for it to work.</p>
            <p>Second, I used <strong>urllib.request</strong> to make requests to the page. This was used to grab the photos from each link.</p>
            <p>Third, <strong>BeautifulSoup</strong> was used for HTML parsing and element finding.</p>
            <p>Lastly, the internal library named <strong>os</strong> was used to create and access certain files or filepaths.</p>
        </section>
        
        <div class="separator"></div>

        <section class="main-section" id="Get_started">
          <header>Get started</header>
            <article>
                I declared some global variables for later use:
                    <p>
                    As I said earlier, selenium needs the chromedriver in order for it to work. It was saved on my desktop</p>
                    <code>driverPath = r"C:\Users\radu-\Desktop\chromedriver"</code>
                    <p>The path of the current python script was saved for creating files/folders.</p>
                    <code>currentPath = os.path.dirname(os.path.realpath(__file__))</code>
                    <p>The location of the folder where the images would be stored. Also, a try/catch block was used to see if the folder was created or to create the folder named sorceries.</p>
                    <code>imagePath = r"D:\visual studio exercises\python\some stuff with selenium\sorceries\%s.png"</code>
                    <p>In another script I had the html source code of the page and the following variable was used to parse and store the content:</p>
                    <code>soup = bs(open(os.path.join(currentPath, "Sorceries.txt")), "html.parser")</code>
                    <p>Lastly, the page was storing the sorceries in tables. In a variable I stored all three of the tables:</p>
                    <code>allTables = soup.find_all("table", {"class": "wiki_table"})</code>
            </article>
          </section>
        
        <div class="separator"></div>
        
        <section class="main-section" id="Starting_the_browser">
          <header>Starting the browser</header>
            <article>
                <p>Now, the first step was to create a browser window. The webdriver is a class from selenium.<code>browser = webdriver.Chrome(driverPath)</code></p>
                <p>I used a method from the webdriver class to access the page given as a parameter.<code>browser.get("http://google.com")</code></p>
            </article>
          </section>

         <div class="separator"></div>

        <section class="main-section" id="The_meat_of_the_program">
          <header>The meat of the program</header>
            <article>
                <p>As I stored all the tables in a variable, I need to iterate over each of the tables and do some operations.</p>
                <code>for table in allTables:</code>
                <p>Now, the data in each table is stored in a <strong>td</strong> tag where all the information about a certain spell is stored: photo, name, uses, etc.
                    Inside the first loop, I store the current row from the current table.</p>
                    <code>currentRow = table.find_all("td")</code>
                <p>What needs to be done right now is to iterate over each of the elements in the current row and do some operations.</p>
                <code>for item in currentRow:</code>
                <p>What's left is to check if the current item in the second loop has an attribute called <strong>img</strong>. Using that, I grab the <strong>alt</strong> text value
                 because it helps at building the link to be accessed in order to download the image.</p>
                    <code>
    if item.find("img", alt=True):<br>
    try:<br>
        link = pngLink%(item.find("img")["alt"])<br>
        browser.get(link)<br>
        time.sleep(randint(4, 7))<br>
        storeTo = imagePath%(item.find("img")["alt"].replace(".png", ""))<br>
        req.urlretrieve(link, storeTo)<br>
        print(item.find("img")["alt"])<br>
    except:<br>
        print("error at",item.find("img")["alt"])<br>
        pass<br>
                    </code>
            </article>
          </section>

        <div class="separator"></div>

      </main>
    
</body>
</html>